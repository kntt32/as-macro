import core_x64;

struct Point {
    x: i64,
    y: i64
};

pub as mov(dst: Point@mem, src: Point@mem) {
    push(rax);
    let a: i64@rax;
    a = src.x;
    dst.x = a;
    a = src.y;
    dst.y = a;
    pop(rax);
};

fn addptr(val: i64@rax, ptr: Point@stack) {
    val = ptr.x;
    add(val, ptr.y);
};

fn test() {
    let array: [i32; 5]@stack;
    let a: i32@rax;
    a = 109012983;
};

pub fn num(val: i64@rax, src: i64@rdi) {
    let flag: bool@rsi;
    flag = true;
    let ptr: Point@stack;
    ptr.x = src;
    ptr.y = 3;
    addptr(val, ptr);
    test();
};


