import core_x64;

struct Point {
    x: i64,
    y: i64
};

pub as test() {
    nop();
    nop();
};

pub as mov(dst: Point@mem, src: Point@mem) {
    push(rax);
    let a: i64@rax;
    a = src.x;
    dst.x = a;
    a = src.y;
    dst.y = a;
    pop(rax);
};

fn addptr(val: i64@rax, ptr: Point@stack) {
    val = ptr.x;
    add(val, ptr.y);
};

pub fn num(val: i64@rax, src: i64@rdi) {
    val = src;
    let ptr: Point@stack;
    ptr.x = src;
    ptr.y = 3;
    addptr(val, ptr);
};
